<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDE Solver App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        
        .app-container {
            display: flex;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            max-width: 1200px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .left-panel {
            width: 400px;
            padding: 20px;
            border-right: 1px solid #eee;
        }
        
        .right-panel {
            flex: 1;
            padding: 20px;
        }
        
        .section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            gap: 10px;
        }
        
        .input-label {
            min-width: 120px;
            font-size: 12px;
            text-align: right;
        }
        
        .input-field {
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 12px;
            width: 100px;
        }
        
        .solve-button {
            background-color: #0076cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 20px 0;
        }
        
        .solve-button:hover {
            background-color: #005bb5;
        }
        
        .description {
            font-size: 12px;
            line-height: 1.4;
            color: #666;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        
        .equation-display {
            text-align: center;
            margin: 10px 0;
            font-family: 'Times New Roman', serif;
            font-size: 16px;
            font-style: italic;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 20px;
        }
        
        .results-section {
            margin-top: 20px;
        }
        
        .error-display {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .error-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .error-label {
            font-size: 12px;
            min-width: 140px;
        }
        
        .error-value {
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 12px;
            width: 80px;
            background-color: #f9f9f9;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="left-panel">
            <div class="description">
                This app solves the differential equation of the form given below using both the forward and backward Euler method and compares the results in terms of error at upper limit of the boundary.
            </div>
            
            <div class="equation-display">
                dy/dx + (b/a)y = 0
            </div>
            
            <div class="section">
                <div class="section-title">Domain Boundaries</div>
                <div class="input-group">
                    <label class="input-label">lower limit</label>
                    <input type="number" id="L0" class="input-field" value="0" step="0.1">
                </div>
                <div class="input-group">
                    <label class="input-label">upper limit</label>
                    <input type="number" id="Lmax" class="input-field" value="1" step="0.1">
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">Constants</div>
                <div class="input-group">
                    <label class="input-label">a</label>
                    <input type="number" id="a" class="input-field" value="1" step="0.1">
                </div>
                <div class="input-group">
                    <label class="input-label">b</label>
                    <input type="number" id="b" class="input-field" value="1" step="0.1">
                </div>
                <div class="input-group">
                    <label class="input-label">Number of Intervals</label>
                    <input type="number" id="N" class="input-field" value="4" min="1" step="1">
                </div>
                <div class="input-group">
                    <label class="input-label">Intervals, dx</label>
                    <input type="number" id="deltaX" class="input-field" readonly>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">Initial Conditions</div>
                <div class="input-group">
                    <label class="input-label">x0</label>
                    <input type="number" id="x0" class="input-field" value="0" step="0.1">
                </div>
                <div class="input-group">
                    <label class="input-label">y0</label>
                    <input type="number" id="y0" class="input-field" value="1" step="0.1">
                </div>
            </div>
            
            <button class="solve-button" onclick="solve()">Solve</button>
        </div>
        
        <div class="right-panel">
            <div class="section-title" style="text-align: center; margin-bottom: 20px;">Results</div>
            
            <div class="chart-container">
                <canvas id="resultChart"></canvas>
            </div>
            
            <div class="results-section">
                <div class="section-title">Error Analysis</div>
                <div class="error-display">
                    <div class="error-item">
                        <label class="error-label">Forward Scheme error</label>
                        <input type="text" id="ForSchemeError" class="error-value" readonly>
                    </div>
                    <div class="error-item">
                        <label class="error-label">Backward Scheme error</label>
                        <input type="text" id="BackSchemeError" class="error-value" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let chart = null;

        // Add event listeners for automatic solving when parameters change
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = ['a', 'b', 'N', 'x0', 'y0', 'Lmax'];
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('input', solve);
            });
            
            // Initial solve
            solve();
        });

        function solve() {
            // Get input values
            const y0 = parseFloat(document.getElementById('y0').value) || 1;
            const x0 = parseFloat(document.getElementById('x0').value) || 0;
            const N = parseInt(document.getElementById('N').value) || 4;
            const a = parseFloat(document.getElementById('a').value) || 1;
            const b = parseFloat(document.getElementById('b').value) || 1;
            const EndTime = parseFloat(document.getElementById('Lmax').value) || 1;
            
            // Calculate dx
            const dx = (EndTime - x0) / N;
            document.getElementById('deltaX').value = dx.toFixed(6);
            
            // Generate x values
            const x = [];
            for (let i = 0; i <= N; i++) {
                x.push(x0 + i * dx);
            }
            
            // Calculate exact solution
            const yExact = x.map(xi => y0 * Math.exp(-b/a * xi));
            
            // Forward Euler method
            const yForward = new Array(N + 1);
            yForward[0] = y0;
            for (let i = 0; i < N; i++) {
                yForward[i + 1] = (1 - b/a * dx) * yForward[i];
            }
            
            // Backward Euler method
            const yBackward = new Array(N + 1);
            yBackward[0] = y0;
            for (let i = 0; i < N; i++) {
                yBackward[i + 1] = yBackward[i] / (1 + b/a * dx);
            }
            
            // Calculate errors
            const forwardError = Math.abs((yExact[N] - yForward[N]) / yExact[N]) * 100;
            const backwardError = Math.abs((yExact[N] - yBackward[N]) / yExact[N]) * 100;
            
            // Update error displays
            document.getElementById('ForSchemeError').value = forwardError.toFixed(4) + '%';
            document.getElementById('BackSchemeError').value = backwardError.toFixed(4) + '%';
            
            // Update chart
            updateChart(x, yExact, yForward, yBackward);
        }

        function updateChart(x, yExact, yForward, yBackward) {
            const ctx = document.getElementById('resultChart').getContext('2d');
            
            if (chart) {
                chart.destroy();
            }
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: x.map(val => val.toFixed(3)),
                    datasets: [
                        {
                            label: 'Exact',
                            data: yExact,
                            borderColor: 'black',
                            backgroundColor: 'black',
                            borderWidth: 2,
                            fill: false,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        },
                        {
                            label: 'Forward Euler',
                            data: yForward,
                            borderColor: 'blue',
                            backgroundColor: 'blue',
                            borderWidth: 0,
                            fill: false,
                            pointRadius: 4,
                            pointStyle: 'circle',
                            showLine: false
                        },
                        {
                            label: 'Backward Euler',
                            data: yBackward,
                            borderColor: 'red',
                            backgroundColor: 'red',
                            borderWidth: 0,
                            fill: false,
                            pointRadius: 4,
                            pointStyle: 'circle',
                            showLine: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'y'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }
    </script>
</body>
</html>